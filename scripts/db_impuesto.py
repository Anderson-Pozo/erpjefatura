import os
from datetime import date
import django

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'erpjefatura.settings.local')
django.setup()

from apps.impuesto.models import Vencimiento, Impuesto, Multa

vencimiento = [
    [1, date(2015, 4, 10), date(2015, 5, 10)],
    [2, date(2015, 4, 12), date(2015, 5, 12)],
    [3, date(2015, 4, 14), date(2015, 5, 14)],
    [4, date(2015, 4, 16), date(2015, 5, 16)],
    [5, date(2015, 4, 18), date(2015, 5, 18)],
    [6, date(2015, 4, 20), date(2015, 5, 20)],
    [7, date(2015, 4, 22), date(2015, 5, 22)],
    [8, date(2015, 4, 24), date(2015, 5, 24)],
    [9, date(2015, 4, 26), date(2015, 5, 26)],
    [0, date(2015, 4, 28), date(2015, 5, 28)],
]

impuestos = [
    [1, 0, 600, 10, 0.0],
    [2, 600, 800, 10, 0.03500],
    [3, 800, 1000, 17, 0.01502],
    [4, 1000, 1200, 20, 0.01000],
    [5, 1200, 1500, 22, 0.02000],
    [6, 1500, 3000, 28, 0.00933],
    [7, 3000, 4000, 42, 0.01400],
    [8, 4000, 5000, 56, 0.02800],
    [9, 5000, 10000, 84, 0.00280],
    [10, 10000, 20000, 98, 0.00140],
    [11, 20000, 30000, 112, 0.00280],
    [12, 30000, 50000, 140, 0.00700],
    [13, 50000, 70000, 280, 0.00700],
    [14, 70000, 90000, 420, 0.00700],
    [15, 90000, 120000, 560, 0.70000],
    [16, 120000, 150000, 770, 0.00500],
    [17, 150000, 200000, 920, 0.00600],
    [18, 200000, 300000, 1220, 0.00400],
    [19, 300000, 500000, 1620, 0.00400],
    [20, 500000, 1000000, 2420, 0.00117],
    [21, 1000000, 9999999, 3005, 0.0],
]

multa = [
    # 2019
    [0.00937, date(2019, 10, 1)], [0.00869, date(2019, 9, 1)], [0.00869, date(2019, 8, 1)],
    [0.00869, date(2019, 7, 1)], [0.00948, date(2019, 6, 1)], [0.00948, date(2019, 5, 1)],
    [0.00948, date(2019, 4, 1)], [0.00941, date(2019, 3, 1)], [0.00941, date(2019, 2, 1)],
    [0.00941, date(2019, 1, 1)],
    # 2018
    [0.00868, date(2018, 12, 1)], [0.00868, date(2018, 11, 1)], [0.00868, date(2018, 10, 1)],
    [0.00794, date(2018, 9, 1)], [0.00916, date(2018, 8, 1)], [0.00916, date(2018, 7, 1)],
    [0.00908, date(2018, 6, 1)], [0.00908, date(2018, 5, 1)], [0.00908, date(2018, 4, 1)],
    [0.00979, date(2018, 3, 1)], [0.00979, date(2018, 2, 1)], [0.00979, date(2018, 1, 1)],
    # 2017
    [0.01024, date(2017, 12, 1)], [0.01024, date(2017, 11, 1)], [0.01024, date(2017, 10, 1)],
    [0.00965, date(2017, 9, 1)], [0.00965, date(2017, 8, 1)], [0.00965, date(2017, 7, 1)],
    [0.01018, date(2017, 6, 1)], [0.01018, date(2017, 5, 1)], [0.01018, date(2017, 4, 1)],
    [0.01013, date(2017, 3, 1)], [0.01013, date(2017, 2, 1)], [0.01013, date(2017, 1, 1)],
    # 2016
    [0.01098, date(2016, 12, 1)], [0.01098, date(2016, 11, 1)], [0.01098, date(2016, 10, 1)],
    [0.01083, date(2016, 9, 1)], [0.01083, date(2016, 8, 1)], [0.01083, date(2016, 7, 1)],
    [0.01108, date(2016, 6, 1)], [0.01108, date(2016, 5, 1)], [0.01108, date(2016, 4, 1)],
    [0.01140, date(2016, 3, 1)], [0.01140, date(2016, 2, 1)], [0.01140, date(2016, 1, 1)],
    # 2015
    [0.01008, date(2015, 12, 1)], [0.01008, date(2015, 11, 1)], [0.01008, date(2015, 10, 1)],
    [0.01088, date(2015, 9, 1)], [0.01088, date(2015, 8, 1)], [0.01088, date(2015, 7, 1)],
    [0.00914, date(2015, 6, 1)], [0.00914, date(2015, 5, 1)], [0.00914, date(2015, 4, 1)],
    [0.01024, date(2015, 3, 1)], [0.01024, date(2015, 2, 1)], [0.01024, date(2015, 1, 1)],
    # 2014
    [0.00983, date(2014, 12, 1)], [0.00983, date(2014, 11, 1)], [0.00983, date(2014, 10, 1)],
    [0.01024, date(2014, 9, 1)], [0.01024, date(2014, 8, 1)], [0.01024, date(2014, 7, 1)],
    [0.01021, date(2014, 6, 1)], [0.01021, date(2014, 5, 1)], [0.01021, date(2014, 4, 1)],
    [0.01021, date(2014, 3, 1)], [0.01021, date(2014, 2, 1)], [0.01021, date(2014, 1, 1)],
    # 2013
    [0.01021, date(2013, 12, 1)], [0.01021, date(2013, 11, 1)], [0.01021, date(2013, 10, 1)],
    [0.01021, date(2013, 9, 1)], [0.01021, date(2013, 8, 1)], [0.01021, date(2013, 7, 1)],
    [0.01021, date(2013, 6, 1)], [0.01021, date(2013, 5, 1)], [0.01021, date(2013, 4, 1)],
    [0.01021, date(2013, 3, 1)], [0.01021, date(2013, 2, 1)], [0.01021, date(2013, 1, 1)]
]


def db_vencimiento():
    if Vencimiento.objects.all().count() == 0:
        for i in vencimiento:
            Vencimiento.objects.create(
                digito=i[0],
                no_obligado=i[1],
                obligado=i[2]
            )
        print('Vencimiento ejecutado ...')
    else:
        print('Ya hay registros en Vencimiento')


def db_impuesto():
    if Impuesto.objects.all().count() == 0:
        for i in impuestos:
            Impuesto.objects.create(
                numero=i[0],
                fraccion_basica=i[1],
                fraccion_excedente=i[2],
                impuesto_fraccion_basica=i[3],
                porcentaje_fraccion_excedente=i[4]
            )
        print('Impuesto ejecutado ...')
    else:
        print('Ya hay registros en Impuesto')


def db_multa():
    if Multa.objects.all().count() == 0:
        for i in multa:
            Multa.objects.create(
                porcentaje=i[0],
                fecha=i[1],
            )
        print('Multa ejecutado ...')
    else:
        print('Ya hay registros en Multa')
